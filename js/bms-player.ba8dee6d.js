(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bms-player"],{"098c":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bms-player"},[r("video",{ref:"player",staticClass:"video-js",attrs:{controls:""}})])},i=[],s=r("9ab4"),a=r("60a3"),l=r("f0e2"),o=function(t){return"number"===typeof t&&!isNaN(t)&&t>=0&&t<1/0},c=function(t){var e=t.playlist.autoadvance_;e.timeout&&t.clearTimeout(e.timeout),e.trigger&&t.off("ended",e.trigger),e.timeout=null,e.trigger=null},u=function t(e,r){c(e),o(r)?(e.playlist.autoadvance_.delay=r,e.playlist.autoadvance_.trigger=function(){var n=function(){return t(e,r)};e.one("play",n),e.playlist.autoadvance_.timeout=e.setTimeout((function(){c(e),e.off("play",n),e.playlist.next()}),1e3*r)},e.one("ended",e.playlist.autoadvance_.trigger)):e.playlist.autoadvance_.delay=null},p=function(t){var e=t.remoteTextTracks(),r=e&&e.length||0;while(r--)t.removeRemoteTextTrack(e[r])},d=function(t,e){var r=!t.paused()||t.ended();return t.trigger("beforeplaylistitem",e.originalValue||e),e.playlistItemId_&&(t.playlist.currentPlaylistItemId_=e.playlistItemId_),t.poster(e.poster||""),t.src(e.sources),p(t),t.ready((function(){if((e.textTracks||[]).forEach(t.addRemoteTextTrack.bind(t)),t.trigger("playlistitem",e.originalValue||e),r){var n=t.play();"undefined"!==typeof n&&"function"===typeof n.then&&n.then(null,(function(t){}))}u(t,t.playlist.autoadvance_.delay)})),t},f=function(t){return!!t&&"object"===typeof t},h=function(t){var e,r=[];return t.forEach((function(t){f(t)?e=t:(e=Object(t),e.originalValue=t),r.push(e)})),r},y=function(t){var e=1;t.forEach((function(t){t.playlistItemId_=e++}))},v=function(t,e){for(var r=0;r<t.length;r++)if(t[r].playlistItemId_===e)return r;return-1},m=function(t,e){var r=t,n=e;return"object"===typeof t&&(r=t.src),"object"===typeof e&&(n=e.src),/^\/\//.test(r)&&(n=n.slice(n.indexOf("//"))),/^\/\//.test(n)&&(r=r.slice(r.indexOf("//"))),r===n},g=function(t,e){for(var r=0;r<t.length;r++){var n=t[r].sources;if(Array.isArray(n))for(var i=0;i<n.length;i++){var s=n[i];if(s&&m(s,e))return r}}return-1},I=function(t){var e=-1,r=t.length-1;while(++e<t.length){var n=e+Math.floor(Math.random()*(r-e+1)),i=t[n];t[n]=t[e],t[e]=i}return t};function _(t,e,r){void 0===r&&(r=0);var n=null,i=!1,s=t.playlist=function(e,r){if(void 0===r&&(r=0),i)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(e)){var a=Array.isArray(n)?n.slice():null,l=e.slice();n=l.slice(),n.filter((function(t){return f(t)})).length!==n.length&&(n=h(n)),y(n),i=!0,t.trigger({type:"duringplaylistchange",nextIndex:r,nextPlaylist:l,previousIndex:s.currentIndex_,previousPlaylist:a||[]}),i=!1,-1!==r&&s.currentItem(r),a&&t.setTimeout((function(){t.trigger("playlistchange")}),0)}return n.map((function(t){return t.originalValue||t})).slice()};return t.on("loadstart",(function(){-1===s.currentItem()&&c(t)})),s.currentIndex_=-1,s.player_=t,s.autoadvance_={},s.repeat_=!1,s.currentPlaylistItemId_=null,s.currentItem=function(t){if(i)return s.currentIndex_;if("number"===typeof t&&s.currentIndex_!==t&&t>=0&&t<n.length)return s.currentIndex_=t,d(s.player_,n[s.currentIndex_]),s.currentIndex_;var e=s.player_.currentSrc()||"";if(s.currentPlaylistItemId_){var r=v(n,s.currentPlaylistItemId_),a=n[r];if(a&&Array.isArray(a.sources)&&g([a],e)>-1)return s.currentIndex_=r,s.currentIndex_;s.currentPlaylistItemId_=null}return s.currentIndex_=s.indexOf(e),s.currentIndex_},s.contains=function(t){return-1!==s.indexOf(t)},s.indexOf=function(t){if("string"===typeof t)return g(n,t);for(var e=Array.isArray(t)?t:t.sources,r=0;r<e.length;r++){var i=e[r];if("string"===typeof i)return g(n,i);if(i.src)return g(n,i.src)}return-1},s.currentIndex=function(){return s.currentItem()},s.lastIndex=function(){return n.length-1},s.nextIndex=function(){var t=s.currentItem();if(-1===t)return-1;var e=s.lastIndex();return s.repeat_&&t===e?0:Math.min(t+1,e)},s.previousIndex=function(){var t=s.currentItem();return-1===t?-1:s.repeat_&&0===t?s.lastIndex():Math.max(t-1,0)},s.first=function(){if(!i){var t=s.currentItem(0);if(n.length)return n[t].originalValue||n[t];s.currentIndex_=-1}},s.last=function(){if(!i){var t=s.currentItem(s.lastIndex());if(n.length)return n[t].originalValue||n[t];s.currentIndex_=-1}},s.next=function(){if(!i){var t=s.nextIndex();if(t!==s.currentIndex_){var e=s.currentItem(t);return n[e].originalValue||n[e]}}},s.previous=function(){if(!i){var t=s.previousIndex();if(t!==s.currentIndex_){var e=s.currentItem(t);return n[e].originalValue||n[e]}}},s.autoadvance=function(t){u(s.player_,t)},s.repeat=function(t){return void 0===t?s.repeat_:"boolean"===typeof t?(s.repeat_=!!t,s.repeat_):void l["a"].log.error("videojs-playlist: Invalid value for repeat",t)},s.sort=function(e){n.length&&(n.sort(e),i||t.trigger("playlistsorted"))},s.reverse=function(){n.length&&(n.reverse(),i||t.trigger("playlistsorted"))},s.shuffle=function(e){var r=void 0===e?{}:e,a=r.rest,l=0,o=n;if(a&&(l=s.currentIndex_+1,o=n.slice(l)),!(o.length<=1)){var c;if(I(o),a)(c=n).splice.apply(c,[l,o.length].concat(o));i||t.trigger("playlistsorted")}},Array.isArray(e)?s(e.slice(),r):n=[],s}var b="4.3.1",x=l["a"].registerPlugin||l["a"].plugin,C=function(t,e){_(this,t,e)};x("playlist",C),C.VERSION=b;var j=r("758e"),O=r("e087");const $=l["a"].getComponent("Button");class k extends ${constructor(t,e){super(t,e),this.el().style.setProperty("display","none","important"),this.on(t,["loadstart","playlistchange","playlistsorted"],()=>{this.update()}),this.on(t,"dispose",()=>{this.dispose()}),e.type||(this.options_.type="next")}update(){const t=this.player_.playlist;t&&t.length?(this.el().style.setProperty("display","inline-block","important"),this.checkIndex()!=t.currentItem()?this.el().removeAttribute("disabled"):this.el().setAttribute("disabled","disabled")):this.el().style.setProperty("display","none","important")}checkIndex(){let t=-1;const e=this.player_.playlist;if(e){switch(this.options_.type){case"prev":t=e.previousIndex();break;default:t=e.nextIndex()}return t}}handleClick(){switch(this.options_.type){case"prev":this.selectPrevItem();break;default:this.selectNextItem()}}selectPrevItem(){const t=this.player_.playlist;t&&t.previous()}selectNextItem(){const t=this.player_.playlist;t&&t.next()}buildCSSClass(){return"vjs-control vjs-playlist-button vjs-playlist-"+this.options_.type}}l["a"].registerComponent("playlist-control-button",k),j["a"](l["a"]);let A=class extends a["d"]{constructor(){super(),this.player=null}created(){O["a"].Extract(this)}beforeDestroy(){this.player&&(this.player.el_=this.$el,this.player.tech()&&this.player.tech().checker&&this.player.tech().checker.stopCheckSession(),this.player.pause(),this.player.dispose())}mounted(){this.changeCode()}changeCode(){this.player&&(this.player.pause(),this.player.dispose()),this.player=Object(l["a"])(this.$refs.player,{preload:"none",controlBar:{volumePanel:{inline:!1}}}),this.player.controlBar.addChild("playlist-control-button",{type:"next"},1),this.player.controlBar.addChild("playlist-control-button",{type:"prev"},0),this._modifyFullscreen(),this.player.boomstreamHls({disableSkin:!0}),this.poster&&this.player.poster(this.poster),this.processConfig(),this.$emit("ready",this)}processConfig(){this.config?(console.log(this.config),this.player.setSourceConfig(this.config).catch(t=>console.log(t))):this.code&&this.player.src(this.code)}_modifyFullscreen(){this.player.el_=this.fullscreenContainer?this.fullscreenContainer:this.$el}};Object(s["a"])([Object(a["b"])()],A.prototype,"code",void 0),Object(s["a"])([Object(a["b"])()],A.prototype,"config",void 0),Object(s["a"])([Object(a["b"])()],A.prototype,"poster",void 0),Object(s["a"])([Object(a["b"])()],A.prototype,"fullscreenContainer",void 0),Object(s["a"])([Object(a["e"])("code")],A.prototype,"changeCode",null),Object(s["a"])([Object(a["e"])("config")],A.prototype,"processConfig",null),A=Object(s["a"])([Object(a["a"])({name:"bms-player",components:{}})],A);var w=A,P=w,T=(r("2763"),r("1efa"),r("2877")),S=Object(T["a"])(P,n,i,!1,null,"c68dcd14",null);e["default"]=S.exports},"1efa":function(t,e,r){"use strict";var n=r("2952"),i=r.n(n);i.a},2763:function(t,e,r){"use strict";var n=r("93ec"),i=r.n(n);i.a},2952:function(t,e,r){},"4e82":function(t,e,r){"use strict";var n=r("23e7"),i=r("1c0b"),s=r("7b0b"),a=r("d039"),l=r("a640"),o=[],c=o.sort,u=a((function(){o.sort(void 0)})),p=a((function(){o.sort(null)})),d=l("sort"),f=u||!p||!d;n({target:"Array",proto:!0,forced:f},{sort:function(t){return void 0===t?c.call(s(this)):c.call(s(this),i(t))}})},"68c1":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"playlist"},[r("ul",{staticClass:"list"},t._l(t.listItems,(function(e,n){return r("li",{key:e.playlistItemId_,class:{active:t.currentItem==n},on:{click:function(r){return t.selectItem(e,n)},tap:function(r){return t.selectItem(e,n)}}},[r("div",{staticClass:"poster",style:{backgroundImage:e.url}},[r("div",{staticClass:"duration"},[t._v(t._s(t._f("duration")(e.duration)))])]),r("div",{staticClass:"info"},[r("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),r("div",{staticClass:"bottom"},[r("div",{staticClass:"author"},[t._v(t._s(e.author))]),r("div",{staticClass:"date"},[t._v(t._s(e.date))])])])])})),0)])},i=[],s=(r("fb6a"),r("4e82"),r("ddb0"),r("9ab4")),a=r("60a3");const l=(t,e)=>e.$root.$options.name==t?e.$root:e.$parent?e.$parent.$options.name==t?e.$parent:l(t,e.$parent):null,o=(t,e)=>{if(!e.$children.length)return null;const r=e.$children.find(e=>e.$options.name===t);if(!r){for(const r in e.$children){const n=o(t,e.$children[r]);if(n)return n}return null}return r},c=t=>{const e=l("bms-app",t);if(!e)return;const r=o("bms-player",e);return r},u=140,p=80;a["d"].filter("duration",(function(t){const e=Math.floor(t/60),r=Math.floor(t-60*e),n=e>9?e:"0"+e,i=r>9?r:"0"+r;return n+":"+i}));let d=class extends a["d"]{constructor(){super(...arguments),this.listItems=[],this.currentItem=-1}created(){const t=c(this);t&&(this.$player=t,this.$player.player.on("playlistchange",this.playlistChange),this.$player.player.on(["duringplaylistchange","playlistitem"],this.checkCurrentItem),this.$player.player.playlist&&this.playlistChange())}mounted(){}playlistChange(){this.currentItem=-1;const t=this.$player.player.playlist();t&&(this.listItems=Array.from(t).slice().map(t=>{t.posters.sort((t,e)=>t.height>e.height?1:-1);const e=t.posters.slice().filter(t=>this._posterCheckSize(t)).shift();return t.url="url("+(e?e.link:t.poster)+")",t}),this.checkCurrentItem())}_posterCheckSize(t){return Number(t.width)>=u&&Number(t.height)>=p}selectItem(t,e){this.$player.player.playlist.currentItem(e),this.currentItem=e}checkCurrentItem(){return this.currentItem=this.$player.player.playlist.currentItem()}};d=Object(s["a"])([Object(a["a"])({components:{}})],d);var f=d,h=f,y=(r("7f69"),r("2877")),v=Object(y["a"])(h,n,i,!1,null,"2f207c52",null);e["default"]=v.exports},"7f69":function(t,e,r){"use strict";var n=r("b0af"),i=r.n(n);i.a},"93ec":function(t,e,r){},a640:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},b0af:function(t,e,r){}}]);